<UserControl x:Class="renkimsumatin.Views.SubjectsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:converters="clr-namespace:renkimsumatin.Converters"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="450" d:DesignWidth="800">
	<UserControl.Resources>
		<converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        <!-- Smaller refresh button style (top-right, orange) -->
        <Style x:Key="RefreshButtonStyle" TargetType="Button">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Padding" Value="4,2"/>
            <Setter Property="Height" Value="24"/>
            <Setter Property="MinWidth" Value="60"/>
            <Setter Property="Margin" Value="6,0,0,0"/>
            <Setter Property="Background" Value="#F59E0B"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
	</UserControl.Resources>

	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
		</Grid.RowDefinitions>

		<!-- Header -->
        <DockPanel Margin="10">
            <TextBlock Text="Subject Management" FontSize="20" FontWeight="Bold" DockPanel.Dock="Left"/>
            <Button Content="Refresh" Command="{Binding RefreshCommand}" DockPanel.Dock="Right"
                    Style="{StaticResource RefreshButtonStyle}" VerticalAlignment="Top" HorizontalAlignment="Right"/>
        </DockPanel>

		<!-- Content -->
		<Grid Grid.Row="1" Margin="10">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="2*"/>
				<ColumnDefinition Width="*"/>
			</Grid.ColumnDefinitions>

			<!-- Subject List -->
			<Border Grid.Column="0" Margin="0,0,10,0" Background="White" CornerRadius="5" Padding="10">
				<StackPanel>
					<TextBlock Text="Subject List" FontSize="16" FontWeight="Bold" Margin="0,0,0,10"/>
					<ListView ItemsSource="{Binding Subjects}" BorderThickness="0">
						<ListView.View>
							<GridView>
								<GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}" Width="150"/>
								<GridViewColumn Header="Code" DisplayMemberBinding="{Binding Code}" Width="100"/>
								<GridViewColumn Header="Actions" Width="100">
									<GridViewColumn.CellTemplate>
										<DataTemplate>
											<StackPanel Orientation="Horizontal">
												<Button Content="Delete" Command="{Binding DataContext.DeleteSubjectCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                        CommandParameter="{Binding}" Padding="5,2" Background="#FF5252" Foreground="White"/>
											</StackPanel>
										</DataTemplate>
									</GridViewColumn.CellTemplate>
								</GridViewColumn>
							</GridView>
						</ListView.View>
					</ListView>
				</StackPanel>
			</Border>

			<!-- Add Subject Form -->
			<Border Grid.Column="1" Background="White" CornerRadius="5" Padding="10">
				<StackPanel>
					<TextBlock Text="Add New Subject" FontSize="16" FontWeight="Bold" Margin="0,0,0,10"/>
					<TextBlock Text="Subject Name" Margin="0,0,0,5"/>
					<TextBox x:Name="NameTextBox" Text="{Binding Name, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,10"
                             Padding="5"/>
					<TextBlock Text="Subject Code" Margin="0,0,0,5"/>
					<TextBox x:Name="CodeTextBox" Text="{Binding Code, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,10"
                             Padding="5"/>
					<Button Content="Add Subject" Command="{Binding AddSubjectCommand}"
                            Background="#4F46E5" Foreground="White" Padding="10,5"/>
				</StackPanel>
			</Border>
		</Grid>
	</Grid>
</UserControl>